
> funnelhq-360@1.0.0 dev
> NODE_ENV=development tsx server/index.ts

üîó SupabaseStorage: Connected to production database
2:41:07 PM [express] serving on port 3000
2:41:11 PM [express] GET /api/notifications 304 in 3ms :: []
2:41:11 PM [express] GET /api/notifications/unread-count 304 in 1ms :: {"count":0}
2:41:41 PM [express] GET /api/notifications 304 in 1ms :: []
2:41:41 PM [express] GET /api/notifications/unread-count 304 in 1ms :: {"count":0}
2:42:05 PM [express] GET /api/notifications 304 in 1ms :: []
2:42:05 PM [express] GET /api/notifications/unread-count 304 in 1ms :: {"count":0}
üîê Auth middleware - Headers: {
  authorization: 'Bearer eyJhbGciOiJSU...',
  userAgent: 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) Ap'
}
üé´ Auth middleware - Token length: 780
2:42:06 PM [express] GET /api/supabase/users/crashdeals101%40gmail.com 304 in 196ms :: {"user":{"id"‚Ä¶
2:42:06 PM [express] GET /api/notifications 304 in 0ms :: []
2:42:06 PM [express] GET /api/notifications/unread-count 304 in 0ms :: {"count":0}
‚úÖ Auth middleware - Token verified: { userId: 'user_2z5Dw6DHKyokamlX9PJ4AftAHPs' }
üë§ Auth middleware - User authenticated: {
  userId: 'user_2z5Dw6DHKyokamlX9PJ4AftAHPs',
  role: 'admin',
  orgId: '9',
  orgName: "vicy test new vickyenwsdsadas's Organization",
  orgPlan: 'pro_trial'
}
Transformed clients for organization 9: []
API returning clients for organization 9: []
2:42:06 PM [express] GET /api/clients 304 in 751ms :: []
üîê Auth middleware - Headers: {
  authorization: 'Bearer eyJhbGciOiJSU...',
  userAgent: 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) Ap'
}
üé´ Auth middleware - Token length: 780
‚úÖ Auth middleware - Token verified: { userId: 'user_2z5Dw6DHKyokamlX9PJ4AftAHPs' }
üë§ Auth middleware - User authenticated: {
  userId: 'user_2z5Dw6DHKyokamlX9PJ4AftAHPs',
  role: 'admin',
  orgId: '9',
  orgName: "vicy test new vickyenwsdsadas's Organization",
  orgPlan: 'pro_trial'
}
üöÄ enforcePlanLimits called for projects, orgId: 9, req.organizationId: 9
üîç enforcePlanLimits: Getting organization 9
üîç SupabaseStorage.getOrganization called with ID: 9
üîç Organization query result: {
  data: {
    id: 9,
    clerk_org_id: 'org_2z5DwxHCEcPUlO0g6ZwdnK8tWp3',
    name: "vicy test new vickyenwsdsadas's Organization",
    slug: 'vicy-test-new-vickyenwsdsadas-s-organization-1751012282',
    logo: null,
    plan: 'pro_trial',
    trial_ends_at: '2025-07-11T08:18:03.151+00:00',
    subscription_status: 'active',
    max_members: -1,
    max_projects: -1,
    max_storage: 1073741824,
    storage_used: 0,
    created_by: 'user_2z5Dw6DHKyokamlX9PJ4AftAHPs',
    created_at: '2025-06-27T08:18:03.223517+00:00',
    updated_at: '2025-06-27T08:18:03.223517+00:00'
  },
  error: null,
  id: 9
}
üîç Returning organization: {
  id: 9,
  clerk_org_id: 'org_2z5DwxHCEcPUlO0g6ZwdnK8tWp3',
  name: "vicy test new vickyenwsdsadas's Organization",
  slug: 'vicy-test-new-vickyenwsdsadas-s-organization-1751012282',
  logo: null,
  plan: 'pro_trial',
  trial_ends_at: '2025-07-11T08:18:03.151+00:00',
  subscription_status: 'active',
  max_members: -1,
  max_projects: -1,
  max_storage: 1073741824,
  storage_used: 0,
  created_by: 'user_2z5Dw6DHKyokamlX9PJ4AftAHPs',
  created_at: '2025-06-27T08:18:03.223517+00:00',
  updated_at: '2025-06-27T08:18:03.223517+00:00'
}
üîç enforcePlanLimits: Got organization result: {
  id: 9,
  clerk_org_id: 'org_2z5DwxHCEcPUlO0g6ZwdnK8tWp3',
  name: "vicy test new vickyenwsdsadas's Organization",
  slug: 'vicy-test-new-vickyenwsdsadas-s-organization-1751012282',
  logo: null,
  plan: 'pro_trial',
  trial_ends_at: '2025-07-11T08:18:03.151+00:00',
  subscription_status: 'active',
  max_members: -1,
  max_projects: -1,
  max_storage: 1073741824,
  storage_used: 0,
  created_by: 'user_2z5Dw6DHKyokamlX9PJ4AftAHPs',
  created_at: '2025-06-27T08:18:03.223517+00:00',
  updated_at: '2025-06-27T08:18:03.223517+00:00'
}
üìù Creating client with data: {
  name: 'test clinet',
  email: 'vicy.7981@gmail.com',
  notes: 'sdasdsad',
  clerkUserId: 'anonymous',
  userEmail: 'crashdeals101@gmail.com'
}
üìù Clerk user ID: user_2z5Dw6DHKyokamlX9PJ4AftAHPs
üîç Looking up user by Clerk ID: user_2z5Dw6DHKyokamlX9PJ4AftAHPs
Creating client with data: {
  "name": "test clinet",
  "email": "vicy.7981@gmail.com",
  "notes": "sdasdsad",
  "createdBy": 46,
  "organizationId": 9
}
üîÑ SupabaseStorage.createClient called with: {
  "name": "test clinet",
  "email": "vicy.7981@gmail.com",
  "notes": "sdasdsad",
  "createdBy": 46,
  "organizationId": 9
}
‚úÖ Client created in Supabase: 24
2:42:18 PM [express] POST /api/clients 201 in 658ms :: {"id":24,"name":"test clinet","email":"vicy.7‚Ä¶
üîê Auth middleware - Headers: {
  authorization: 'Bearer eyJhbGciOiJSU...',
  userAgent: 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) Ap'
}
üé´ Auth middleware - Token length: 780
‚úÖ Auth middleware - Token verified: { userId: 'user_2z5Dw6DHKyokamlX9PJ4AftAHPs' }
üë§ Auth middleware - User authenticated: {
  userId: 'user_2z5Dw6DHKyokamlX9PJ4AftAHPs',
  role: 'admin',
  orgId: '9',
  orgName: "vicy test new vickyenwsdsadas's Organization",
  orgPlan: 'pro_trial'
}
Transformed clients for organization 9: [
  {
    id: 24,
    name: 'test clinet',
    organizationId: 9,
    joinedAt: '2025-06-27T09:12:18.057+00:00'
  }
]
API returning clients for organization 9: [
  {
    "id": 24,
    "name": "test clinet",
    "email": "vicy.7981@gmail.com",
    "avatar": null,
    "notes": "sdasdsad",
    "created_by": 46,
    "organization_id": 9,
    "joined_at": "2025-06-27T09:12:18.057+00:00",
    "joinedAt": "2025-06-27T09:12:18.057+00:00",
    "createdBy": 46,
    "organizationId": 9
  }
]
2:42:18 PM [express] GET /api/clients 200 in 325ms :: [{"id":24,"name":"test clinet","email":"vicy.7‚Ä¶
2:42:36 PM [express] GET /api/notifications 304 in 1ms :: []
2:42:36 PM [express] GET /api/notifications/unread-count 304 in 1ms :: {"count":0}
2:43:06 PM [express] GET /api/notifications 304 in 1ms :: []
2:43:06 PM [express] GET /api/notifications/unread-count 304 in 0ms :: {"count":0}
2:43:36 PM [express] GET /api/notifications 304 in 1ms :: []
2:43:36 PM [express] GET /api/notifications/unread-count 304 in 0ms :: {"count":0}
2:44:06 PM [express] GET /api/notifications 304 in 1ms :: []
2:44:06 PM [express] GET /api/notifications/unread-count 304 in 0ms :: {"count":0}
2:44:36 PM [express] GET /api/notifications 304 in 2ms :: []
2:44:36 PM [express] GET /api/notifications/unread-count 304 in 0ms :: {"count":0}
2:45:06 PM [express] GET /api/notifications 304 in 4ms :: []
2:45:06 PM [express] GET /api/notifications/unread-count 304 in 1ms :: {"count":0}
2:45:36 PM [express] GET /api/notifications 304 in 1ms :: []
2:45:36 PM [express] GET /api/notifications/unread-count 304 in 0ms :: {"count":0}
2:46:06 PM [express] GET /api/notifications 304 in 3ms :: []
2:46:06 PM [express] GET /api/notifications/unread-count 304 in 0ms :: {"count":0}
2:46:36 PM [express] GET /api/notifications 304 in 1ms :: []
2:46:36 PM [express] GET /api/notifications/unread-count 304 in 0ms :: {"count":0}
2:47:06 PM [express] GET /api/notifications 304 in 1ms :: []
2:47:06 PM [express] GET /api/notifications/unread-count 304 in 1ms :: {"count":0}
2:47:36 PM [express] GET /api/notifications 304 in 3ms :: []
2:47:36 PM [express] GET /api/notifications/unread-count 304 in 1ms :: {"count":0}
2:48:06 PM [express] GET /api/notifications 304 in 2ms :: []
2:48:06 PM [express] GET /api/notifications/unread-count 304 in 0ms :: {"count":0}
2:48:36 PM [express] GET /api/notifications 304 in 95ms :: []
2:48:36 PM [express] GET /api/notifications/unread-count 304 in 3ms :: {"count":0}
2:49:06 PM [express] GET /api/notifications 304 in 1ms :: []
2:49:06 PM [express] GET /api/notifications/unread-count 304 in 0ms :: {"count":0}
2:49:36 PM [express] GET /api/notifications 304 in 5ms :: []
2:49:36 PM [express] GET /api/notifications/unread-count 304 in 2ms :: {"count":0}
2:50:06 PM [express] GET /api/notifications 304 in 2ms :: []
2:50:06 PM [express] GET /api/notifications/unread-count 304 in 0ms :: {"count":0}
2:50:36 PM [express] GET /api/notifications 304 in 4ms :: []
2:50:36 PM [express] GET /api/notifications/unread-count 304 in 0ms :: {"count":0}
2:51:06 PM [express] GET /api/notifications 304 in 1ms :: []
2:51:06 PM [express] GET /api/notifications/unread-count 304 in 1ms :: {"count":0}
2:51:13 PM [vite] hmr update /src/pages/signup.tsx, /src/index.css?v=7j3wenKbtvLQ1PTpJsZMr
2:51:36 PM [express] GET /api/notifications 304 in 1ms :: []
2:51:36 PM [express] GET /api/notifications/unread-count 304 in 0ms :: {"count":0}
2:51:58 PM [vite] hmr update /src/App.tsx?v=7j3wenKbtvLQ1PTpJsZMr, /src/index.css?v=7j3wenKbtvLQ1PTpJsZMr
2:52:05 PM [vite] hmr update /src/App.tsx?v=7j3wenKbtvLQ1PTpJsZMr, /src/index.css?v=7j3wenKbtvLQ1PTpJsZMr
2:52:06 PM [express] GET /api/notifications 304 in 1ms :: []
2:52:06 PM [express] GET /api/notifications/unread-count 304 in 0ms :: {"count":0}
2:52:13 PM [vite] hmr update /src/pages/login.tsx, /src/index.css?v=7j3wenKbtvLQ1PTpJsZMr
2:52:13 PM [vite] hmr update /src/pages/login.tsx, /src/index.css?v=7j3wenKbtvLQ1PTpJsZMr
2:52:19 PM [vite] hmr update /src/pages/organization-setup.tsx, /src/index.css?v=7j3wenKbtvLQ1PTpJsZMr
2:52:32 PM [vite] hmr update /src/pages/organization-setup.tsx, /src/index.css?v=7j3wenKbtvLQ1PTpJsZMr
2:52:36 PM [express] GET /api/notifications 304 in 0ms :: []
2:52:36 PM [express] GET /api/notifications/unread-count 304 in 0ms :: {"count":0}
2:53:06 PM [express] GET /api/notifications 304 in 1ms :: []
2:53:06 PM [express] GET /api/notifications/unread-count 304 in 0ms :: {"count":0}
2:53:36 PM [express] GET /api/notifications 304 in 0ms :: []
2:53:36 PM [express] GET /api/notifications/unread-count 304 in 0ms :: {"count":0}
2:54:06 PM [express] GET /api/notifications 304 in 1ms :: []
2:54:06 PM [express] GET /api/notifications/unread-count 304 in 0ms :: {"count":0}
